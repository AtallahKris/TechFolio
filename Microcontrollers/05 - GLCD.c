#include <p18cxxx.h>
#include <GLCD.h>
#include <delays.h>

char digits[3];
char seconds = 20;

const far rom char picture1[1024] = {0};
const far rom char picture7[] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 80, 64, 0, 4, 4, 2, 242, 2, 2, 4, 194, 2, 2, 194, 68,
132, 4, 4, 194, 4, 4, 192, 4, 4, 196, 4, 0, 0, 56, 32, 32, 32, 192, 0, 0, 248, 132, 6, 2,
2, 196, 68, 120, 48, 16, 16, 16, 8, 8, 8, 8, 24, 16, 48, 56, 236, 134, 2, 2, 130, 102, 60, 12,
0, 0, 0, 0, 0, 0, 0, 254, 194, 130, 130, 230, 60, 24, 8, 4, 6, 2, 2, 6, 6, 4, 4, 8, 56,
228, 4, 6, 134, 102, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 7, 5, 11, 8, 8, 8, 11, 16, 16, 35, 32, 33,
34, 18, 17, 16, 8, 19, 16, 48, 83, 80, 80, 236, 196, 197, 5, 3, 0, 0, 0, 0, 3, 2, 254, 6, 1,
0, 0, 28, 28, 28, 0, 0, 0, 0, 0, 0, 28, 28, 0, 0, 3, 3, 61, 225, 0, 0, 0, 0, 128, 192, 64,
64, 64, 64, 192, 121, 15, 129, 192, 192, 134, 134, 6, 0, 0, 0, 0, 6, 6, 134, 192, 128, 129, 131,
63, 49, 16, 16, 48, 112, 192, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 126, 194, 3, 1, 2, 2, 0, 4, 7, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 63, 241, 131, 252, 0, 0, 0, 0,
128, 128, 3, 3, 131, 99, 19, 16, 192, 192, 32, 16, 16, 96, 129, 3, 131, 3, 3, 0, 0, 0, 0, 0,
128, 240, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 192, 113, 31, 14, 0, 0, 0, 0, 25, 9, 10, 10, 14,
12, 0, 0, 0, 0, 0, 0, 0, 0, 12, 30, 26, 18, 48, 33, 0, 0, 0, 0, 192, 112, 30, 5, 131, 194,
118, 28, 0, 0, 1, 49, 24, 15, 118, 128, 0, 1, 1, 0, 0, 128, 118, 15, 25, 17, 0, 0, 0, 56,
12, 6, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 248, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 6, 3, 0, 0, 0, 240, 1, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 1, 12, 12, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 28, 240, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 6, 116, 156, 200, 120, 24, 8, 8, 8, 8, 12, 4,
6, 2, 2, 2, 2, 2, 6, 4, 4, 4, 4, 60, 108, 132, 134, 119, 29, 0, 0, 0, 0, 0, 1, 28, 140,
136, 104, 56, 16, 16, 16, 16, 24, 8, 12, 4, 2, 2, 2, 6, 4, 4, 12, 8, 8, 8, 56, 120, 72, 72,
126, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
};

void setup();

void main(void) {
    InitGLCD();
    while(1) {
        DisplayPicture((ROM) picture7);
        DispRomStr(Ln1Ch0, (ROM) "Left time: s ");
        while(1) {
            Bin2Asc(seconds, digits);
            DispVarStr(digits, Ln1Ch10, 3);
            seconds--;
            Delay10KTCYx(50);
            if(seconds == 0)
                break;
        }
        DisplayPicture((ROM) picture1);
        Delay10KTCYx(50);
        seconds = 20;
    }
}